---
interface Props {
  title: string;
  description?: string;
  currentPage?: string;
  image?: string;
  publishedDate?: Date;
}

const {
  title,
  description = "AI, strategy, and culture. Thirty years of building things.",
  currentPage = "",
  image,
  publishedDate
} = Astro.props;

const siteTitle = "Matt Robinson";
const siteUrl = "https://mattrobinson.ai";
const fullTitle = currentPage ? `${title} â€” ${siteTitle}` : siteTitle;
const ogImage = image ? `${siteUrl}${image}` : undefined;
const ogType = currentPage === "writing" ? "article" : "website";
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />

    <!-- Open Graph -->
    <meta property="og:title" content={fullTitle} />
    <meta property="og:description" content={description} />
    <meta property="og:type" content={ogType} />
    <meta property="og:url" content={`${siteUrl}${Astro.url.pathname}`} />
    {ogImage && <meta property="og:image" content={ogImage} />}
    {ogType === "article" && <meta property="article:author" content="Matt Robinson" />}
    {ogType === "article" && publishedDate && <meta property="article:published_time" content={publishedDate.toISOString()} />}

    <!-- Twitter Card -->
    <meta name="twitter:card" content={ogImage ? "summary_large_image" : "summary"} />
    <meta name="twitter:title" content={fullTitle} />
    <meta name="twitter:description" content={description} />
    {ogImage && <meta name="twitter:image" content={ogImage} />}

    <link rel="canonical" href={`https://mattrobinson.ai${Astro.url.pathname}`} />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet" />

    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>{fullTitle}</title>

    <!-- Structured Data for AI/LLM Visibility -->
    <script type="application/ld+json" set:html={JSON.stringify({
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "Person",
          "@id": "https://mattrobinson.ai/#person",
          "name": "Matt Robinson",
          "url": "https://mattrobinson.ai",
          "sameAs": [
            "https://www.linkedin.com/in/mattrobinson-au/"
          ],
          "jobTitle": "Managing Director",
          "worksFor": {
            "@type": "Organization",
            "name": "DBX at Bastion",
            "url": "https://au.bastionagency.com/digital/"
          },
          "description": "Digital strategy leader with 30 years experience. Co-founder of AnalogFolk (2011), now Managing Director of DBX at Bastion. Works at the intersection of AI, strategy, and culture.",
          "knowsAbout": [
            "Digital Strategy",
            "AI Strategy",
            "Brand Building",
            "Digital Transformation",
            "Marketing Technology",
            "Experience Design"
          ],
          "alumniOf": [
            {
              "@type": "Organization",
              "name": "AnalogFolk",
              "description": "Digital creative agency co-founded in 2011"
            }
          ],
          "address": {
            "@type": "PostalAddress",
            "addressLocality": "Sydney",
            "addressCountry": "Australia"
          }
        },
        {
          "@type": "WebSite",
          "@id": "https://mattrobinson.ai/#website",
          "url": "https://mattrobinson.ai",
          "name": "Matt Robinson",
          "description": "AI, strategy, and culture. Thirty years of building things.",
          "publisher": {
            "@id": "https://mattrobinson.ai/#person"
          },
          "inLanguage": "en-AU"
        },
        ...(ogType === "article" ? [{
          "@type": "Article",
          "headline": title,
          "description": description,
          "url": `${siteUrl}${Astro.url.pathname}`,
          "author": { "@id": "https://mattrobinson.ai/#person" },
          "publisher": { "@id": "https://mattrobinson.ai/#person" },
          ...(publishedDate ? { "datePublished": publishedDate.toISOString() } : {}),
          ...(ogImage ? { "image": ogImage } : {}),
          "isPartOf": { "@id": "https://mattrobinson.ai/#website" },
          "inLanguage": "en-AU"
        }] : [])
      ]
    })} />
  </head>
  <body>
    <header class="site-header">
      <nav>
        <a href="/" class="site-name">Matt Robinson</a>
        <div class="nav-links">
          <a href="/bio" class:list={["nav-link", { active: currentPage === "bio" }]}>Bio</a>
          <a href="/writing" class:list={["nav-link", { active: currentPage === "writing" }]}>Writing</a>
        </div>
      </nav>
    </header>

    <main class="page-container">
      <slot />
    </main>

    <footer class="site-footer">
      <div class="footer-content">
        <span>&copy; {new Date().getFullYear()} Matt Robinson</span>
        <div class="footer-links">
          <a href="https://www.linkedin.com/in/mattrobinson-au/" target="_blank" rel="noopener noreferrer">LinkedIn</a>
        </div>
      </div>
    </footer>
  </body>
</html>

<style is:global>
  @import '../styles/global.css';
</style>
